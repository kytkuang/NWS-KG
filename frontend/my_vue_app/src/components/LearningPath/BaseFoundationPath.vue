<template>
  <div class="learning-path-wrapper">
    <div class="content-container">
      <!-- å·¦ä¾§è·¯å¾„å›¾ -->
      <div class="path-container">
        <h2 class="section-title">ç½‘ç»œå®‰å…¨åŸºç¡€å­¦ä¹ è·¯å¾„å›¾</h2>

        <!-- å­¦ä¹ è·¯å¾„å›¾ -->
        <div class="path-diagram">
          <!-- ç¬¬ä¸€å±‚ï¼šç½‘ç»œåŸºç¡€ -->
          <div class="path-layer">
            <div class="layer-label">èµ·ç‚¹é˜¶æ®µ</div>
            <div class="node-container">
              <div 
                class="learning-node start-node"
                :class="{ 'selected': selectedNode === 'network-basics' }"
                @click="selectNode('network-basics')"
              >
                <div class="node-header">
                  <div class="node-tag start-tag">èµ·ç‚¹</div>
                  <div class="node-title">ç½‘ç»œåŸºç¡€</div>
                </div>
                <div class="node-body">
                  <div class="node-desc">å»ºç«‹ç½‘ç»œé€šä¿¡åŸºç¡€è®¤çŸ¥</div>
                  <div class="node-features">
                    <span class="feature">TCP/IPåè®®</span>
                    <span class="feature">HTTP/DNS</span>
                    <span class="feature">ç½‘ç»œæ¨¡å‹</span>
                  </div>
                </div>
                <div class="node-arrow">
                  <div class="arrow-down"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- è¿æ¥çº¿1 -->
          <div class="connection-line line-1">
            <div class="line"></div>
            <div class="line-label">å‰ç½®ä¾èµ–</div>
          </div>

          <!-- ç¬¬äºŒå±‚ï¼šæ“ä½œç³»ç»Ÿ -->
          <div class="path-layer">
            <div class="layer-label">åŸºç¡€ç¯å¢ƒé˜¶æ®µ</div>
            <div class="parallel-container">
              <!-- å¹¶è¡Œå­¦ä¹ æç¤º -->
              <div class="parallel-label">
                <div class="parallel-line"></div>
                <div class="parallel-text">å»ºè®®å¹¶è¡Œå­¦ä¹ </div>
                <div class="parallel-line"></div>
              </div>

              <!-- LinuxèŠ‚ç‚¹ -->
              <div 
                class="learning-node parallel-node linux-node"
                :class="{ 'selected': selectedNode === 'linux-basics' }"
                @click="selectNode('linux-basics')"
              >
                <div class="node-header">
                  <div class="node-tag parallel-tag">åŸºç¡€</div>
                  <div class="node-title">LinuxåŸºç¡€</div>
                </div>
                <div class="node-body">
                  <div class="node-desc">æœåŠ¡å™¨ä¸è¿ç»´æ ¸å¿ƒç¯å¢ƒ</div>
                  <div class="node-features">
                    <span class="feature">æ–‡ä»¶æƒé™</span>
                    <span class="feature">Shellå‘½ä»¤</span>
                    <span class="feature">æœåŠ¡é…ç½®</span>
                  </div>
                </div>
                <div class="node-arrow">
                  <div class="arrow-down-right"></div>
                </div>
              </div>

              <!-- WindowsèŠ‚ç‚¹ -->
              <div 
                class="learning-node parallel-node windows-node"
                :class="{ 'selected': selectedNode === 'windows-basics' }"
                @click="selectNode('windows-basics')"
              >
                <div class="node-header">
                  <div class="node-tag parallel-tag">åŸºç¡€</div>
                  <div class="node-title">WindowsåŸºç¡€</div>
                </div>
                <div class="node-body">
                  <div class="node-desc">ä¼ä¸šç¯å¢ƒä¸æ¡Œé¢å®‰å…¨</div>
                  <div class="node-features">
                    <span class="feature">ç”¨æˆ·æƒé™</span>
                    <span class="feature">ç³»ç»ŸæœåŠ¡</span>
                    <span class="feature">æ—¥å¿—å®¡è®¡</span>
                  </div>
                </div>
                <div class="node-arrow">
                  <div class="arrow-down-left"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- è¿æ¥çº¿2 -->
          <div class="connection-line line-2">
            <div class="line merge-line"></div>
            <div class="line-label">çŸ¥è¯†èåˆ</div>
          </div>

          <!-- ç¬¬ä¸‰å±‚ï¼šå®‰å…¨æ¦‚å¿µ -->
          <div class="path-layer">
            <div class="layer-label">ç»¼åˆåº”ç”¨é˜¶æ®µ</div>
            <div class="node-container">
              <div 
                class="learning-node end-node"
                :class="{ 'selected': selectedNode === 'security-concepts' }"
                @click="selectNode('security-concepts')"
              >
                <div class="node-header">
                  <div class="node-tag end-tag">ç»¼åˆ</div>
                  <div class="node-title">å®‰å…¨åŸºæœ¬æ¦‚å¿µ</div>
                </div>
                <div class="node-body">
                  <div class="node-desc">æ„å»ºå®Œæ•´å®‰å…¨è®¤çŸ¥æ¡†æ¶</div>
                  <div class="node-features">
                    <span class="feature">CIAä¸‰è¦ç´ </span>
                    <span class="feature">åŠ å¯†æŠ€æœ¯</span>
                    <span class="feature">æ”»å‡»ç±»å‹</span>
                  </div>
                </div>
                <div class="node-complete">å®ŒæˆåŸºç¡€é˜¶æ®µ</div>
              </div>
            </div>
          </div>
        </div>

        <!-- å›¾ä¾‹è¯´æ˜ -->
        <div class="legend-container">
          <div class="legend-item">
            <div class="legend-color start-legend"></div>
            <div class="legend-text">èµ·ç‚¹æ¨¡å—</div>
          </div>
          <div class="legend-item">
            <div class="legend-color parallel-legend"></div>
            <div class="legend-text">å¹¶è¡Œå­¦ä¹ æ¨¡å—</div>
          </div>
          <div class="legend-item">
            <div class="legend-color end-legend"></div>
            <div class="legend-text">ç»¼åˆåº”ç”¨æ¨¡å—</div>
          </div>
          <div class="legend-item">
            <div class="legend-line"></div>
            <div class="legend-text">ä¾èµ–å…³ç³»</div>
          </div>
        </div>
      </div>

      <!-- å³ä¾§è¯¦æƒ…é¢æ¿ -->
      <div class="detail-container" :class="{ 'visible': selectedNode !== null }">
        <div class="detail-header">
          <div class="detail-title">
            <h3>{{ selectedBlock?.title || 'å­¦ä¹ æ¨¡å—è¯¦æƒ…' }}</h3>
            <div class="detail-stage" v-if="selectedBlock">{{ selectedBlock.stage }}</div>
          </div>
          <button class="close-btn" @click="closeDetail">Ã—</button>
        </div>

        <div class="detail-content" v-if="selectedBlock">
          <!-- æ¨¡å—æ¦‚è§ˆ -->
          <div class="detail-section">
            <h4 class="section-title-small">æ¨¡å—æ¦‚è¿°</h4>
            <p class="section-text">{{ selectedBlock.description }}</p>
            
            <div class="meta-grid">
              <div class="meta-item">
                <div class="meta-label">å­¦ä¹ éš¾åº¦</div>
                <div class="meta-value">{{ getDifficulty(selectedBlock.id) }}</div>
              </div>
              <div class="meta-item">
                <div class="meta-label">å»ºè®®æ—¶é—´</div>
                <div class="meta-value">{{ getStudyTime(selectedBlock.id) }}</div>
              </div>
              <div class="meta-item">
                <div class="meta-label">ä¾èµ–æ¨¡å—</div>
                <div class="meta-value">{{ selectedBlock.prerequisites.length || 'æ— ' }}</div>
              </div>
            </div>
          </div>

          <!-- æ ¸å¿ƒçŸ¥è¯†ç‚¹ -->
          <div class="detail-section">
            <h4 class="section-title-small">æ ¸å¿ƒçŸ¥è¯†ç‚¹</h4>
            <div class="knowledge-list">
              <div 
                v-for="(topic, index) in selectedBlock.topics" 
                :key="index"
                class="knowledge-item"
              >
                <div class="knowledge-number">{{ index + 1 }}</div>
                <div class="knowledge-text">{{ topic }}</div>
              </div>
            </div>
          </div>

          <!-- å­¦ä¹ è·¯å¾„ -->
          <div class="detail-section">
            <h4 class="section-title-small">å­¦ä¹ è·¯å¾„</h4>
            <div class="learning-steps">
              <!-- å‰ç½®ä¾èµ– -->
              <div class="step" v-if="selectedBlock.prerequisites.length > 0">
                <div class="step-header">
                  <div class="step-number">1</div>
                  <div class="step-title">å…ˆå†³æ¡ä»¶</div>
                </div>
                <div class="step-content">
                  <div class="prereq-list">
                    <div 
                      v-for="(pre, idx) in selectedBlock.prerequisites" 
                      :key="idx"
                      class="prereq-item"
                      @click="selectPrerequisite(pre)"
                    >
                      {{ pre }}
                    </div>
                  </div>
                  <div class="step-note">éœ€è¦å…ˆæŒæ¡è¿™äº›å‰ç½®çŸ¥è¯†</div>
                </div>
              </div>

              <!-- å­¦ä¹ é¡ºåº -->
              <div class="step">
                <div class="step-header">
                  <div class="step-number">{{ selectedBlock.prerequisites.length > 0 ? '2' : '1' }}</div>
                  <div class="step-title">å­¦ä¹ é¡ºåº</div>
                </div>
                <div class="step-content">
                  <div class="order-text">{{ selectedBlock.orderHint }}</div>
                </div>
              </div>

              <!-- åç»­åº”ç”¨ -->
              <div class="step">
                <div class="step-header">
                  <div class="step-number">{{ selectedBlock.prerequisites.length > 0 ? '3' : '2' }}</div>
                  <div class="step-title">åç»­åº”ç”¨</div>
                </div>
                <div class="step-content">
                  <div class="application-list">
                    <div 
                      v-for="(app, idx) in getApplications(selectedBlock.id)" 
                      :key="idx"
                      class="application-item"
                    >
                      {{ app }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- å­¦ä¹ å»ºè®® -->
          <div class="detail-section">
            <h4 class="section-title-small">å­¦ä¹ å»ºè®®</h4>
            <ul class="suggestion-list">
              <li v-for="(suggestion, idx) in getSuggestions(selectedBlock.id)" :key="idx">
                {{ suggestion }}
              </li>
            </ul>
          </div>

          <!-- æ“ä½œæŒ‰é’® -->
          <div class="action-buttons">
            <button class="btn-primary" @click="startLearning">å¼€å§‹å­¦ä¹ </button>
            <button class="btn-secondary" @click="viewMaterials">æŸ¥çœ‹èµ„æ–™</button>
          </div>
        </div>

        <!-- ç©ºçŠ¶æ€ -->
        <div class="empty-state" v-else>
          <div class="empty-icon">ğŸ“š</div>
          <h4>é€‰æ‹©å­¦ä¹ æ¨¡å—</h4>
          <p>ç‚¹å‡»å·¦ä¾§è·¯å¾„å›¾ä¸­çš„ä»»æ„æ¨¡å—ï¼ŒæŸ¥çœ‹è¯¦ç»†å†…å®¹å’Œå­¦ä¹ å»ºè®®</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'LearningPathDiagram',
  data() {
    return {
      blocks: [
        {
          id: 'network-basics',
          title: 'ç½‘ç»œåŸºç¡€',
          stage: 'èµ·æ­¥é˜¶æ®µ',
          description: 'ä»é›¶æ„å»ºå¯¹è®¡ç®—æœºç½‘ç»œçš„æ•´ä½“è®¤çŸ¥ï¼Œç†è§£æ•°æ®å¦‚ä½•åœ¨ä¸åŒä¸»æœºä¸ç½‘ç»œä¹‹é—´ä¼ è¾“ï¼Œæ˜¯åç»­æ‰€æœ‰å®‰å…¨å­¦ä¹ çš„å¿…å¤‡åŸºç¡€ã€‚',
          topics: [
            'è®¡ç®—æœºç½‘ç»œåˆ†å±‚æ¨¡å‹ï¼ˆOSI ä¸ƒå±‚æ¨¡å‹ã€TCP/IP å››å±‚æ¨¡å‹ï¼‰',
            'TCP / UDP åè®®åŠç«¯å£ã€è¿æ¥çŠ¶æ€ï¼ˆSYN/ACKã€ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ï¼‰',
            'IP åœ°å€ã€å­ç½‘æ©ç ä¸å­ç½‘åˆ’åˆ†ï¼Œè·¯ç”±ä¸è½¬å‘åŸºæœ¬æ¦‚å¿µ',
            'å¸¸è§åº”ç”¨å±‚åè®®ï¼šHTTP/HTTPSã€DNSã€SMTPã€FTP ç­‰',
            'DNS è§£æè¿‡ç¨‹ä¸ç¼“å­˜ã€HTTP è¯·æ±‚/å“åº”æŠ¥æ–‡ç»“æ„'
          ],
          prerequisites: [],
          orderHint: 'å»ºè®®ä»ç½‘ç»œæ¨¡å‹ â†’ TCP/IP åè®® â†’ IP/è·¯ç”± â†’ å¸¸è§åº”ç”¨å±‚åè®®çš„é¡ºåºé€æ­¥å­¦ä¹ ã€‚'
        },
        {
          id: 'linux-basics',
          title: 'Linux æ“ä½œç³»ç»ŸåŸºç¡€',
          stage: 'åŸºç¡€ç¯å¢ƒ',
          description: 'æŒæ¡ Linux çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•å’Œç³»ç»Ÿç®¡ç†èƒ½åŠ›ï¼Œæ˜¯è¿›è¡Œæ¸—é€æµ‹è¯•ã€æœåŠ¡å™¨åŠ å›ºå’Œå®‰å…¨è¿ç»´çš„æ ¸å¿ƒæŠ€èƒ½ä¹‹ä¸€ã€‚',
          topics: [
            'Linux æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„ï¼ˆ/etcã€/varã€/homeã€/var/log ç­‰ï¼‰',
            'ç”¨æˆ·ä¸ç”¨æˆ·ç»„ã€æ–‡ä»¶æƒé™ä¸æ‰€æœ‰è€…ï¼ˆrwxã€chmodã€chownï¼‰',
            'å¸¸ç”¨å‘½ä»¤ï¼šæ–‡ä»¶/ç›®å½•æ“ä½œã€è¿›ç¨‹ç®¡ç†ã€ç½‘ç»œè°ƒè¯•ï¼ˆlsã€psã€netstatã€ssã€tcpdump ç­‰ï¼‰',
            'Shell åŸºç¡€ä¸ç®€å•è„šæœ¬ç¼–å†™ï¼ˆå˜é‡ã€æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ï¼‰',
            'å¸¸è§æœåŠ¡çš„å®‰è£…ä¸åŸºç¡€é…ç½®ï¼ˆSSHã€Web æœåŠ¡ç­‰ï¼‰'
          ],
          prerequisites: ['ç½‘ç»œåŸºç¡€'],
          orderHint: 'åœ¨æŒæ¡ç½‘ç»œåŸºç¡€åï¼Œé€šè¿‡å‘½ä»¤è¡Œç»ƒä¹ æ–‡ä»¶ç®¡ç† â†’ æƒé™æ§åˆ¶ â†’ æœåŠ¡éƒ¨ç½²ï¼Œé€æ­¥ç†Ÿæ‚‰ Linux ç¯å¢ƒã€‚'
        },
        {
          id: 'windows-basics',
          title: 'Windows åŸºç¡€',
          stage: 'åŸºç¡€ç¯å¢ƒ',
          description: 'äº†è§£ Windows çš„è´¦æˆ·ä½“ç³»ã€æœåŠ¡æœºåˆ¶å’Œç®¡ç†å·¥å…·ï¼Œä¸ºåç»­çš„åŸŸæ¸—é€ã€å®‰å…¨å®¡è®¡å’Œè“é˜Ÿé˜²æŠ¤æ‰“ä¸‹åŸºç¡€ã€‚',
          topics: [
            'æœ¬åœ°ç”¨æˆ·ä¸ç”¨æˆ·ç»„ç®¡ç†ã€æƒé™æ¨¡å‹ï¼ˆACLï¼‰',
            'Windows æ³¨å†Œè¡¨ç»“æ„ä¸å¸¸è§å…³é”®ä½ç½®',
            'ç³»ç»ŸæœåŠ¡ä¸å¯åŠ¨é¡¹ç®¡ç†ï¼Œä»»åŠ¡è®¡åˆ’ç¨‹åºçš„åŸºæœ¬ä½¿ç”¨',
            'äº‹ä»¶æŸ¥çœ‹å™¨ä¸æ—¥å¿—åŸºç¡€ï¼Œå®‰å…¨ç›¸å…³æ—¥å¿—çš„å®šä½',
            'Active Directory / åŸŸçš„åŸºç¡€æ¦‚å¿µä¸å…¸å‹ç»“æ„ï¼ˆåªéœ€ç†è§£ï¼Œä¸å¿…æ·±å…¥å®ç°ç»†èŠ‚ï¼‰'
          ],
          prerequisites: ['ç½‘ç»œåŸºç¡€'],
          orderHint: 'åœ¨ç†è§£ç½‘ç»œåŸºç¡€åï¼Œå…ˆç†Ÿæ‚‰æœ¬åœ°è´¦å·ä¸æƒé™ï¼Œå†äº†è§£æœåŠ¡ã€æ—¥å¿—å’Œ AD åŸºæœ¬æ¶æ„ã€‚'
        },
        {
          id: 'security-concepts',
          title: 'å®‰å…¨åŸºæœ¬æ¦‚å¿µ',
          stage: 'å®‰å…¨å…¥é—¨',
          description: 'åœ¨å…·å¤‡ç½‘ç»œä¸æ“ä½œç³»ç»Ÿè®¤çŸ¥åï¼Œä»å®è§‚å±‚é¢ç†è§£ä¿¡æ¯å®‰å…¨çš„ç›®æ ‡ã€å¨èƒç±»å‹ä»¥åŠå¸¸è§é˜²æŠ¤æ€è·¯ï¼Œæ˜¯è¿›å…¥å„ç±»å®‰å…¨åˆ†æ”¯å‰çš„å¿…ä¿®è¯¾ã€‚',
          topics: [
            'CIA ä¸‰è¦ç´ ï¼šæœºå¯†æ€§ï¼ˆConfidentialityï¼‰ã€å®Œæ•´æ€§ï¼ˆIntegrityï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰',
            'å®‰å…¨ç­–ç•¥ã€æœ€å°æƒé™åŸåˆ™ã€çºµæ·±é˜²å¾¡ç­‰å®‰å…¨è®¾è®¡åŸåˆ™',
            'å¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†çš„åŸºæœ¬åŸç†ä¸å…¸å‹ç®—æ³•ï¼ˆAESã€RSA ç­‰ï¼‰',
            'å“ˆå¸Œç®—æ³•ä¸å®Œæ•´æ€§æ ¡éªŒï¼ˆMD5ã€SHA ç³»åˆ—ï¼‰ï¼Œæ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰çš„åŸºæœ¬æ€æƒ³',
            'å¸¸è§æ”»å‡»ç±»å‹æ¦‚è§ˆï¼šSQL æ³¨å…¥ã€XSSã€CSRFã€æš´åŠ›ç ´è§£ã€ç¤¾å·¥ã€æ‹’ç»æœåŠ¡ç­‰'
          ],
          prerequisites: ['ç½‘ç»œåŸºç¡€', 'Linux æ“ä½œç³»ç»ŸåŸºç¡€', 'Windows åŸºç¡€'],
          orderHint: 'åœ¨æŒæ¡ç½‘ç»œä¸æ“ä½œç³»ç»ŸåŸºç¡€åï¼Œå†ç³»ç»Ÿæ€§å­¦ä¹ å®‰å…¨ä¸‰è¦ç´ ã€åŠ å¯†ä¸æ”»å‡»ç±»å‹ï¼Œä»"ä¸ºä»€ä¹ˆè¦é˜²""é˜²ä»€ä¹ˆ"ä¸¤ä¸ªè§’åº¦å»ºç«‹å®‰å…¨æ€ç»´ã€‚'
        }
      ],
      selectedNode: 'network-basics'
    }
  },
  computed: {
    selectedBlock() {
      return this.blocks.find(block => block.id === this.selectedNode)
    }
  },
  methods: {
    selectNode(nodeId) {
      this.selectedNode = nodeId
    },
    
    closeDetail() {
      this.selectedNode = null
    },
    
    getDifficulty(nodeId) {
      const difficulties = {
        'network-basics': 'åˆçº§',
        'linux-basics': 'åˆçº§',
        'windows-basics': 'åˆçº§',
        'security-concepts': 'ä¸­çº§'
      }
      return difficulties[nodeId] || 'åˆçº§'
    },
    
    getStudyTime(nodeId) {
      const times = {
        'network-basics': '2-3å‘¨',
        'linux-basics': '2-3å‘¨',
        'windows-basics': '1-2å‘¨',
        'security-concepts': '2-3å‘¨'
      }
      return times[nodeId] || '1-2å‘¨'
    },
    
    getApplications(nodeId) {
      const applications = {
        'network-basics': ['ç½‘ç»œåè®®åˆ†æ', 'æµé‡ç›‘æ§', 'ç½‘ç»œæ‹“æ‰‘è®¾è®¡'],
        'linux-basics': ['æœåŠ¡å™¨ç®¡ç†', 'è„šæœ¬è‡ªåŠ¨åŒ–', 'æœåŠ¡éƒ¨ç½²'],
        'windows-basics': ['ç³»ç»Ÿå®¡è®¡', 'æ—¥å¿—åˆ†æ', 'æƒé™ç®¡ç†'],
        'security-concepts': ['é£é™©è¯„ä¼°', 'å®‰å…¨ç­–ç•¥åˆ¶å®š', 'æ¸—é€æµ‹è¯•åŸºç¡€']
      }
      return applications[nodeId] || []
    },
    
    getSuggestions(nodeId) {
      const suggestions = {
        'network-basics': [
          'ä½¿ç”¨ Wireshark æŠ“åŒ…åˆ†æå®é™…ç½‘ç»œæµé‡',
          'æ­å»ºå°å‹å±€åŸŸç½‘å®éªŒç¯å¢ƒ',
          'é€ä¸ªå­¦ä¹  TCP/IP åè®®æ—ä¸­çš„æ ¸å¿ƒåè®®'
        ],
        'linux-basics': [
          'åœ¨è™šæ‹Ÿæœºä¸­å®‰è£… Linux ç³»ç»Ÿè¿›è¡Œå®æ“',
          'æ¯å¤©ç»ƒä¹ å¸¸ç”¨å‘½ä»¤ï¼Œå½¢æˆè‚Œè‚‰è®°å¿†',
          'å°è¯•ç¼–å†™ç®€å•çš„ Shell è„šæœ¬è§£å†³å®é™…é—®é¢˜'
        ],
        'windows-basics': [
          'åœ¨è‡ªå·±çš„ Windows ç”µè„‘ä¸Šå®è·µç®¡ç†æ“ä½œ',
          'å…³æ³¨ Windows äº‹ä»¶æŸ¥çœ‹å™¨ä¸­çš„å®‰å…¨æ—¥å¿—',
          'äº†è§£åŸŸç¯å¢ƒçš„åŸºæœ¬æ¦‚å¿µå’Œæ¶æ„'
        ],
        'security-concepts': [
          'ç»“åˆå·²å­¦ç½‘ç»œå’Œç³»ç»ŸçŸ¥è¯†ç†è§£å®‰å…¨æ¦‚å¿µ',
          'æŸ¥é˜… OWASP Top 10 äº†è§£å¸¸è§ Web æ¼æ´',
          'æ€è€ƒå¦‚ä½•å°† CIA ä¸‰è¦ç´ åº”ç”¨åˆ°å®é™…åœºæ™¯'
        ]
      }
      return suggestions[nodeId] || []
    },
    
    selectPrerequisite(preName) {
      const preNode = this.blocks.find(block => block.title === preName)
      if (preNode) {
        this.selectNode(preNode.id)
      }
    },
    
    startLearning() {
      alert(`å¼€å§‹å­¦ä¹ ï¼š${this.selectedBlock.title}`)
    },
    
    viewMaterials() {
      // è·³è½¬åˆ°èµ„æ–™é¡µé¢ï¼Œå¹¶ä¼ é€’ç»„ä»¶åç§°ä½œä¸ºæŸ¥è¯¢å‚æ•°
      this.$router.push({
        name: 'Materials',
        query: {
          component: this.selectedNode
        }
      })
    }
  }
}
</script>

<style scoped>
.learning-path-wrapper {
  width: 100%;
  min-height: 100vh;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  padding: 20px;
  box-sizing: border-box;
}

.content-container {
  display: flex;
  max-width: 1400px;
  margin: 0 auto;
  gap: 20px;
  height: calc(100vh - 40px);
}

/* å·¦ä¾§è·¯å¾„å›¾å®¹å™¨ */
.path-container {
  flex: 1;
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  overflow-y: auto;
}

.section-title {
  margin: 0 0 12px 0;
  font-size: 24px;
  font-weight: 700;
  color: #1a202c;
  text-align: center;
}

.section-intro {
  margin: 0 0 32px 0;
  font-size: 14px;
  color: #4a5568;
  line-height: 1.6;
  text-align: center;
}

.section-intro b {
  color: #2c5282;
  font-weight: 600;
}

/* è·¯å¾„å›¾ */
.path-diagram {
  position: relative;
  padding: 20px 0;
}

.path-layer {
  margin-bottom: 40px;
  position: relative;
}

.layer-label {
  font-size: 12px;
  font-weight: 600;
  color: #718096;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
  text-align: center;
}

/* èŠ‚ç‚¹æ ·å¼ */
.node-container {
  display: flex;
  justify-content: center;
}

.parallel-container {
  display: flex;
  justify-content: space-around;
  align-items: flex-start;
  position: relative;
  min-height: 200px;
}

.learning-node {
  background: white;
  border-radius: 10px;
  padding: 16px;
  width: 220px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border: 2px solid transparent;
  transition: all 0.3s ease;
  cursor: pointer;
  position: relative;
}

.learning-node:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

.learning-node.selected {
  border-color: #4299e1;
  box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
}

.start-node {
  border-top: 4px solid #48bb78;
}

.parallel-node {
  border-top: 4px solid #ed8936;
}

.linux-node {
  margin-right: 10px;
}

.windows-node {
  margin-left: 10px;
}

.end-node {
  border-top: 4px solid #805ad5;
}

.node-header {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
  gap: 8px;
}

.node-tag {
  font-size: 11px;
  font-weight: 700;
  color: white;
  padding: 2px 8px;
  border-radius: 999px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.start-tag {
  background: #48bb78;
}

.parallel-tag {
  background: #ed8936;
}

.end-tag {
  background: #805ad5;
}

.node-title {
  font-size: 16px;
  font-weight: 700;
  color: #2d3748;
  flex: 1;
}

.node-body {
  margin-bottom: 12px;
}

.node-desc {
  font-size: 12px;
  color: #718096;
  margin-bottom: 10px;
  line-height: 1.4;
}

.node-features {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.feature {
  font-size: 11px;
  padding: 2px 6px;
  background: #e2e8f0;
  color: #4a5568;
  border-radius: 4px;
  font-weight: 500;
}

.node-arrow {
  display: flex;
  justify-content: center;
  padding-top: 8px;
  border-top: 1px dashed #e2e8f0;
}

.arrow-down {
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 10px solid #a0aec0;
}

.arrow-down-right {
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 10px solid #a0aec0;
  transform: rotate(45deg);
}

.arrow-down-left {
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 10px solid #a0aec0;
  transform: rotate(-45deg);
}

.node-complete {
  font-size: 11px;
  font-weight: 600;
  color: #805ad5;
  text-align: center;
  padding-top: 8px;
  border-top: 1px dashed #e2e8f0;
}

/* è¿æ¥çº¿ */
.connection-line {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 40px;
  position: relative;
}

.line {
  height: 2px;
  width: 80%;
  background: linear-gradient(90deg, #cbd5e0, #a0aec0);
  position: relative;
}

.line::before,
.line::after {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  background: #a0aec0;
  border-radius: 50%;
  top: -3px;
}

.line::before {
  left: 0;
}

.line::after {
  right: 0;
}

.merge-line {
  background: linear-gradient(90deg, 
    transparent 0%, 
    transparent 15%, 
    #a0aec0 15%, 
    #a0aec0 85%, 
    transparent 85%, 
    transparent 100%
  );
}

.line-label {
  position: absolute;
  font-size: 11px;
  color: #718096;
  background: white;
  padding: 2px 8px;
  border-radius: 4px;
  border: 1px solid #e2e8f0;
}

/* å¹¶è¡Œæ ‡ç­¾ */
.parallel-label {
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
}

.parallel-line {
  width: 60px;
  height: 1px;
  background: #ed8936;
}

.parallel-text {
  font-size: 11px;
  color: #ed8936;
  font-weight: 600;
  white-space: nowrap;
}

/* å›¾ä¾‹ */
.legend-container {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-top: 32px;
  padding: 16px;
  background: #f7fafc;
  border-radius: 8px;
  flex-wrap: wrap;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 3px;
}

.start-legend {
  background: #48bb78;
}

.parallel-legend {
  background: #ed8936;
}

.end-legend {
  background: #805ad5;
}

.legend-line {
  width: 20px;
  height: 2px;
  background: #a0aec0;
}

.legend-text {
  font-size: 12px;
  color: #4a5568;
}

/* å³ä¾§è¯¦æƒ…é¢æ¿ */
.detail-container {
  width: 380px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
  opacity: 0;
  transform: translateX(20px);
  transition: all 0.3s ease;
  overflow: hidden;
}

.detail-container.visible {
  opacity: 1;
  transform: translateX(0);
}

.detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid #e2e8f0;
  background: #f8fafc;
}

.detail-title {
  flex: 1;
}

.detail-title h3 {
  margin: 0 0 4px 0;
  font-size: 18px;
  font-weight: 700;
  color: #2d3748;
}

.detail-stage {
  font-size: 11px;
  font-weight: 600;
  color: white;
  padding: 2px 8px;
  background: #805ad5;
  border-radius: 999px;
  display: inline-block;
}

.close-btn {
  background: none;
  border: none;
  font-size: 24px;
  color: #718096;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s ease;
}

.close-btn:hover {
  background: #edf2f7;
  color: #4a5568;
}

.detail-content {
  flex: 1;
  overflow-y: auto;
  padding: 0 24px 24px;
}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 24px;
  text-align: center;
  flex: 1;
}

.empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.3;
}

.empty-state h4 {
  margin: 0 0 8px 0;
  font-size: 16px;
  font-weight: 600;
  color: #2d3748;
}

.empty-state p {
  margin: 0;
  font-size: 14px;
  color: #718096;
  line-height: 1.5;
}

/* è¯¦æƒ…å†…å®¹æ ·å¼ */
.detail-section {
  margin-bottom: 24px;
  padding-bottom: 24px;
  border-bottom: 1px solid #e2e8f0;
}

.detail-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.section-title-small {
  font-size: 14px;
  font-weight: 700;
  color: #2d3748;
  margin: 0 0 12px 0;
}

.section-text {
  font-size: 13px;
  color: #4a5568;
  line-height: 1.6;
  margin: 0 0 16px 0;
}

.meta-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.meta-item {
  background: #f7fafc;
  border-radius: 6px;
  padding: 8px;
  text-align: center;
}

.meta-label {
  font-size: 11px;
  color: #718096;
  margin-bottom: 4px;
}

.meta-value {
  font-size: 13px;
  color: #2d3748;
  font-weight: 600;
}

/* çŸ¥è¯†ç‚¹åˆ—è¡¨ */
.knowledge-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.knowledge-item {
  display: flex;
  gap: 12px;
  padding: 10px;
  background: #f7fafc;
  border-radius: 6px;
  border-left: 3px solid #4299e1;
}

.knowledge-number {
  font-size: 12px;
  font-weight: 700;
  color: #4299e1;
  min-width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border-radius: 50%;
}

.knowledge-text {
  font-size: 13px;
  color: #4a5568;
  line-height: 1.4;
  flex: 1;
}

/* å­¦ä¹ æ­¥éª¤ */
.learning-steps {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.step {
  background: #f7fafc;
  border-radius: 8px;
  padding: 12px;
}

.step-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.step-number {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #805ad5;
  color: white;
  border-radius: 50%;
  font-size: 12px;
  font-weight: 700;
}

.step-title {
  font-size: 13px;
  font-weight: 600;
  color: #2d3748;
}

.prereq-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 8px;
}

.prereq-item {
  font-size: 12px;
  padding: 4px 8px;
  background: #e9d8fd;
  color: #553c9a;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.prereq-item:hover {
  background: #d6bcfa;
}

.step-note {
  font-size: 11px;
  color: #718096;
  font-style: italic;
}

.order-text {
  font-size: 13px;
  color: #4a5568;
  line-height: 1.5;
}

.application-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.application-item {
  font-size: 12px;
  padding: 4px 8px;
  background: #bee3f8;
  color: #2c5282;
  border-radius: 4px;
}

/* å­¦ä¹ å»ºè®® */
.suggestion-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.suggestion-list li {
  font-size: 13px;
  color: #4a5568;
  padding: 6px 0;
  padding-left: 16px;
  position: relative;
  line-height: 1.4;
}

.suggestion-list li::before {
  content: "â€¢";
  position: absolute;
  left: 0;
  color: #48bb78;
  font-weight: bold;
}

/* æ“ä½œæŒ‰é’® */
.action-buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 24px;
}

.btn-primary, .btn-secondary {
  padding: 12px 16px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
}

.btn-primary {
  background: #805ad5;
  color: white;
}

.btn-primary:hover {
  background: #6b46c1;
}

.btn-secondary {
  background: #f7fafc;
  color: #4a5568;
  border: 1px solid #e2e8f0;
}

.btn-secondary:hover {
  background: #edf2f7;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 1024px) {
  .content-container {
    flex-direction: column;
    height: auto;
  }
  
  .detail-container {
    width: 100%;
    margin-top: 20px;
  }
  
  .parallel-container {
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }
  
  .linux-node, .windows-node {
    margin: 0;
  }
  
  .parallel-label {
    top: -10px;
  }
}

@media (max-width: 768px) {
  .content-container {
    gap: 16px;
  }
  
  .path-container, .detail-container {
    padding: 16px;
  }
  
  .section-title {
    font-size: 20px;
  }
  
  .learning-node {
    width: 100%;
    max-width: 280px;
  }
  
  .legend-container {
    gap: 16px;
  }
  
  .meta-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>